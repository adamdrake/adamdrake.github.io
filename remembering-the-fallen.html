<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="Adam Drake is an advisor to scale-up tech companies. He writes about ML/AI/crypto/data, leadership, and building tech teams."><title>Remembering The Fallen - Adam Drake</title><link rel="shortcut icon" href=/static/favicon.ico><link rel=stylesheet href=https://adamdrake.com/css/main.min.504be040a7418e5cb36174fca671fd5f87aa7c9d713b086c3696df81209c3b56.css integrity="sha256-UEvgQKdBjlyzYXT8pnH9X4eqfJ1xOwhsNpbfgSCcO1Y=" media=screen><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://adamdrake.com/static/images/twitter-card.jpg"><meta name=twitter:title content="Remembering The Fallen"><meta name=twitter:description content="Those that know me are aware that I have always had great respect for people who have served or are serving in the military. I thought it would be a nice project to create a Twitter bot that would tweet, on a given day, all the US Servicemembers killed in action on that day in prior years. You can view it on Twitter or follow @thedailyfallen directly.
I&rsquo;ve had questions before about simple Data Science, Machine Learning, and software development projects before, so here is a good example of just such a project."><meta property="og:title" content="Remembering The Fallen"><meta property="og:description" content="Those that know me are aware that I have always had great respect for people who have served or are serving in the military. I thought it would be a nice project to create a Twitter bot that would tweet, on a given day, all the US Servicemembers killed in action on that day in prior years. You can view it on Twitter or follow @thedailyfallen directly.
I&rsquo;ve had questions before about simple Data Science, Machine Learning, and software development projects before, so here is a good example of just such a project."><meta property="og:type" content="article"><meta property="og:url" content="https://adamdrake.com/remembering-the-fallen.html"><meta property="og:image" content="https://adamdrake.com/static/images/twitter-card.jpg"><meta property="article:published_time" content="2016-09-22T00:00:00+00:00"><meta property="article:modified_time" content="2016-09-22T00:00:00+00:00"></head><body><div class=title-box><div class=title-left><h1 class=name><a href=/>Adam Drake</a></h1></div><div class=title-right><div class=social-icons><a href=https://github.com/adamdrake><img class=icon src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAC5UlEQVR4nO2a0XXiMBBFKYESKIEOlg5CB3EHmw5wB9DBbgebDnAHTgemA9PB3Q8J1mtkaSSPjTnRPYePHIzem/FoJFtZrTKZTCaTyWQmBFgD78ABOAMNjzT2u4O9dv1s36OwQf8EakewUmo7xuskA9gAR6AdEXif1o65eXZ8XjDlqxm4KxGHZ8f5ALBlXKnHUrOUagAKpr3rQ7TAfgnBP5viOwd/Y94ksKzgb8wzHTAN7xlzPkTLHI0Rf7ffdZJUAleFwK52rK0de+e5tp46+NJn1HH92vGbK1DZz6f93P7uJ6zEsQsMJKycKvgN/tKvAr/dIyhRybU2WUNMMxWAUyDzlbrosBdfAvSrAFPKocZXqYr6/YQS0KL5AAV8BAQBWjXBsB/JKlRoCkr2+Q9NcCqQrS46KwKm/CXsVARlnnxLYZfx0wDZru9TIa5YX6E+ABq7Q8LdH2a8+x1fe4GvUkMolOnZ5r7DW6gXVBoizeQi6d5CN6fREAlRjQ8l2VuwD2iI5AR89wRcJhdJ9xbioiEiWW83o4XifW0EvioNIUkCitFC8b4kG7RKQ0iyETqPDyna11ng66QhJNlxwTKfBVS2wtKHoZoZDjGtH+kplI4f4GsJSYgM/ktTOOYcoMa+wdUEU/ZNhI9CU3zN44NHZRPze8DAH+BNQfvNjhWD/gMaj6vB/YQWcw7g2zCdMUfnwcrA3Okjsi4/xPju7zDmqoKWfwcWW8f3XS4I+oPVCe4+PVwlOqlJcL0cvb+Bxd8rPkbqSBHrJIF7Z1gKzIsbI/J1vk81Rcx9c65S/+89PKaM9zYZOxJKMiH4a0ySRzFwh34pa8QyT/Adg675flQcP4ZCSzfWpCsJDWbJ+9H5vCeMvezgO0Z3CE5qEsYNMd+cD4FpjN73Bglj+qgWE3wXTNd3VkPCWEN3fdp1fiyYJfDUT0TCOP3AT7zS/wyvVvcmWZGwN7cB3x64XivwTCaTyWQymVfgL42yxWFGEKJcAAAAAElFTkSuQmCC width=64 height=64></a>
<a href=https://twitter.com/aadrake><img class=icon src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACQ0lEQVR4nO2a0XWjMBBFXQIluIR0EDpIOjAdLB1kO0g6sDvIdgAd2B3gDkwHNx8jEkIMNmTGkvfMPUc//hjmPTTSIHm1chzHcRzHcRzHSQggAx6BlzA2wEPsvMwBcqBinCYYkl2I8WyRXKEe9Ct2BmwnhJ8z4mEQ46ln3lo7wTwELlQDrz7F72eI7zgBr8D74Pc37RxXwK73gEI59naB+DEOTJTHb5IcvqFCKW7+U8PvxIex0cqxS/QcW4W4jZL4rhyqvhka2rtEx9izcHsC1krih7RLc5pK9jDxwBMXtqaRmKWB+KO6+JDsvyse3gCbGTH/Kou3WQBDssWMRBrgz6VkDAywER+SzZDamkuFmPFjWqJsgJn4XsIaNVsh+/4L0y3vbMwNCCZcsxZEwVr4K7JtZXzvClOhtTagY49M3VMcnaPU1gZM9QEpsLM24C22wgsU1gZYta1a2J8Wke4sOJqLDwZkpLkW6B+A3JkJtz0sRUxIpRwONxU/MGKNNEXHiAYUMYQ/I81QN2I1Rcebiw8GrFn2ZaiN/tn/DBO0v+XnUkcT3zOhjiS+RfviY6EBGXE+j4vY2r+BHJTcak3YxdZ7FmQ2lMiMsDIj3p4/B+S2p9EWj+WhpwbILBheVGpQJy0e6Qu2BsIh4Zp/RM4Jl1xrX0NLzEanJzRH+v0K/boeI70pj3R+1ltdDeSxtU6CXJFpdoAtMsPu6w9QyMJXsuxz+ICcJ8SvcS2QLTAPo0RKphtl+P2+3rLjOI7jOI7jOP8tH5ahgbeYuZE9AAAAAElFTkSuQmCC width=64 height=64></a>
<a href=https://linkedin.com/in/aadrake><img class=icon src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAzElEQVRIie2WWxGDMBBFVwISkIAEnBQJOCoOKqE4AAeNg+Lg9AOY2VmSTls29If7eTPJmbubl8gioAEG/DQAF9ECOkeA1VUnya1GgPEA0CARs2dO2QLBi2RBAShU78pcoF6MgCkH6AlUClJ7QGKgFXYD7l6QFOhbBeYN9Hb3bkCRHqX8CaiNV6aAe0CV9Ra/IHIsfgapRYuIv7lt9iTSi7VmbHP+9oB0eR6peR6gj+adoBP0X9ART/l43OdkiZnzu9XZmjb4lnFkTSIiLyov4WUSpGLDAAAAAElFTkSuQmCC width=64 height=64></a>
<a href=/index.xml><img class=icon src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAABOElEQVRIib2WXXWEMBBGIyESkICDroPWQSNhHRQnrANwsOsAHFAJdXD7ALSz0wmZLrTfObwwkDs/X3ISwiIgAQPHaQBegxRwORCg1cpK/lopAKN6eQEaoAduwPsBoCFoSDAEVMDZSMotF0hBT8yV7gIBtMAb8Aw8ATEDTMDHHpClDm3VGVbjbKcXtGrSQCB6YL8FreoQLfXALJC099bPg4LVbMys6DpmazdOWHbzu+29AK0KO/Wdaf2SvaNaJGKfi0ntMxfIApcGP6mEflTudd0E1KqNWrKq86OgFSYr0wbplQMfBoEwC3ZVMpG7U98C3ZZFKmwHZRcDTjn3WaCqkPWLiPfemAWKBVCzMadszAJd+W7d1YjLOek9lY2ZnneoXR5vbPy/y0mmBUfqq50rLLHj8mFoRJwWnzknvtUm1yWnAAAAAElFTkSuQmCC width=64 height=64></a></div><div class=subscribe><form action=https://api.digitalmaneuver.com/subscribe method=get><input class=subscribe-field style=width:200px name=email placeholder="Subscribe to newsletter?" type=text>
<input class=subscribe-btn value=Yes! type=submit></form></div></div></div><div class="nav-box row"><div class=nav-left-menu><ul><li><a href=/>Latest</a> |</li><li><a href=/about.html>About</a> |</li><li><a href=/cases.html>Case Studies</a> |</li><li><a href=/contact.html>Contact</a> |</li><li><a href=/press.html>Press</a></li></ul></div></div><section class=section><div class=container><a href=https://applybyapi.com><button class=btn>Struggling to hire developers? Check out ApplyByAPI!</button></a><h1 class=page-title>Remembering The Fallen</h1><h2 class=content-date>September 22, 2016</h2><div class=share-links>Share this:
<a class=twitter-share-button href="https://twitter.com/intent/tweet?text=Read%20Remembering%20The%20Fallen%20https%3a%2f%2fadamdrake.com%2fremembering-the-fallen.html" onclick="window.open(this.href,'twitter-share','width=550,height=235');return false;">twitter</a> //
<a class=icon-facebook href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fadamdrake.com%2fremembering-the-fallen.html" onclick="window.open(this.href,'facebook-share','width=580,height=296');return false;">facebook</a> //
<a class=icon-linkedin href="https://www.linkedin.com/shareArticle?mini=true&url=https://adamdrake.com&title=Remembering%20The%20Fallen&source=Adam%20Drake" onclick="window.open(this.href,'linkedin-share','width=980,height=980');return false;">linkedin</a> //
<a class=icon-google-plus href="https://plus.google.com/share?url=https%3a%2f%2fadamdrake.com%2fremembering-the-fallen.html" onclick="window.open(this.href,'google-plus-share','width=490,height=530');return false;">google+</a></div><div class=content><p>Those that know me are aware that I have always had great respect for people who have served or are serving in the military. I thought it would be a nice project to create a Twitter bot that would tweet, on a given day, all the US Servicemembers killed in action on that day in prior years. You can view it <a href=https://twitter.com/thedailyfallen>on Twitter</a> or follow @thedailyfallen directly.</p><p>I&rsquo;ve had questions before about simple Data Science, Machine Learning, and software development projects before, so here is a good example of just such a project.</p><p>Some people might say there isn&rsquo;t much Data Science going on here. <strong>FALSE!</strong> Any experienced Data Science person will tell you that the majority of the work is acquiring, cleaning, and transforming the data. Often there is little or no actual machine learning happening in a successful Data Science project. Data Science projects are successful because they make the business more successful. Sometimes that requires zero machine learning. In this project, probably 80% to 90% of the time was spent finding, cleaning, and transforming the data, which is par for the course in <strong>ANY</strong> Data Science project in my experience.</p><p>Excuse the digression.</p><h1 id=acquire-data>Acquire data</h1><p>This wasn&rsquo;t as quick as I thought it would be, but it never is.</p><p>The Department of Defense website wasn&rsquo;t very helpful, but after some searching I found some suitable data from the <a href=https://catalog.archives.gov/id/4734832>National Archives</a>.</p><p>The data is in <em>Defense Casualty Analysis System</em> (DCAS) format, and includes all the service members who have died from 1950 through 2005, with another file containing deaths for 2006. The files are pipe-delimited and the fields are pretty well documented in the <a href=https://catalog.archives.gov/OpaAPI/media/4734832/content/arcmedia/electronic-records/rg-330/DCAS/DCAS_DOC_PDF.pdf>associated PDF</a>.</p><p>They are also very clear on the contents of the file(s):</p><blockquote><p>This file contains the records of U.S. military personnel casualties for deaths between the years 1950 and 2005, and two records of deaths related to Vietnam that occurred in 2006. The casualties occurred worldwide and resulted from both hostile and non-hostile action. The war or conflict for each casualty is identified as occurring during the Korean War, Vietnam War, Gulf War, War on Terrorism, or Peacetime. Because of the broad nature of the category of Peacetime, several fields further describe those casualties in terms of location, circumstances, category, and reason. Each record includes such information as: the service member&rsquo;s name, service number, service branch, rank, pay grade, occupation, birth date, gender, home of record (city, county, state or province, country), marital status, religion, race, ethnicity, casualty circumstances, casualty location (city, state or province, country or over water), unit, duty, process date, death date, war or conflict, operation incident type, aircraft type, hostile or non-hostile death indicator, casualty type, and casualty category. Since this is the public use version of the file, the service number field is masked.</p></blockquote><h1 id=clean-and-transform-data>Clean and transform data</h1><p>There were some records with errors in the file, as is nearly always the case, so after taking only the records listed as <code>KILLED IN ACTION</code> I further filtered out the ones where the date of death wasn&rsquo;t 8 characters long since the file represents death date as an 8 character string in <code>yyyymmdd</code> format.</p><p>After that it was a matter of constructing the tweet string I wanted, which was a concatenation of rank, name, KILLED IN ACTION, location of death, and year of death. The month and day are always the same as the current one, only the year is different, so I didn&rsquo;t include it in the tweet text. Additionally, I split out the day and month of death, so that I could match on it later to get all the records for a particular month and day.</p><p>After these steps I simply output the tweet text, day of death, and month of death columns in a new pipe-delimited file.</p><p>The preprocessing code is pretty standard fare. I&rsquo;m sure it can be made cleaner and/or more efficient, but it&rsquo;s not needed for this data set or project.</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>pandas</span> <span style=color:#069;font-weight:700>as</span> <span style=color:#0cf;font-weight:700>pd</span>
<span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>datetime</span>
pd<span style=color:#555>.</span>options<span style=color:#555>.</span>mode<span style=color:#555>.</span>chained_assignment <span style=color:#555>=</span> None

data <span style=color:#555>=</span> pd<span style=color:#555>.</span>read_csv(<span style=color:#c30>&#39;allpuf.dat&#39;</span>, sep<span style=color:#555>=</span><span style=color:#c30>&#39;|&#39;</span>, low_memory<span style=color:#555>=</span>False, header<span style=color:#555>=</span>None)
kia <span style=color:#555>=</span> data[(data[<span style=color:#f60>44</span>] <span style=color:#555>==</span> <span style=color:#c30>&#39;KILLED IN ACTION&#39;</span>)]
kia<span style=color:#555>.</span>rename(columns<span style=color:#555>=</span>{<span style=color:#f60>7</span> : <span style=color:#c30>&#39;rank&#39;</span>, <span style=color:#f60>34</span> : <span style=color:#c30>&#39;dod&#39;</span>, <span style=color:#f60>35</span> : <span style=color:#c30>&#39;yod&#39;</span>, <span style=color:#f60>30</span> : <span style=color:#c30>&#39;countryOfDeath&#39;</span>}, inplace<span style=color:#555>=</span>True)

kia[<span style=color:#c30>&#39;dod&#39;</span>] <span style=color:#555>=</span> kia[<span style=color:#c30>&#39;dod&#39;</span>]<span style=color:#555>.</span>astype(<span style=color:#366>str</span>)
kia[<span style=color:#c30>&#39;dodlen&#39;</span>] <span style=color:#555>=</span> kia[<span style=color:#c30>&#39;dod&#39;</span>]<span style=color:#555>.</span>apply(<span style=color:#069;font-weight:700>lambda</span> x: <span style=color:#366>len</span>(<span style=color:#366>str</span>(x)))
kia <span style=color:#555>=</span> kia[kia[<span style=color:#c30>&#39;dodlen&#39;</span>] <span style=color:#555>==</span> <span style=color:#f60>8</span>]

kia[<span style=color:#c30>&#39;name&#39;</span>] <span style=color:#555>=</span> kia[<span style=color:#f60>4</span>]<span style=color:#555>.</span>apply(<span style=color:#069;font-weight:700>lambda</span> x: x<span style=color:#555>.</span>split(<span style=color:#c30>&#39; &#39;</span>)[<span style=color:#f60>0</span>] <span style=color:#555>+</span> <span style=color:#c30>&#39;, &#39;</span> <span style=color:#555>+</span> <span style=color:#c30>&#39; &#39;</span><span style=color:#555>.</span>join(x<span style=color:#555>.</span>split(<span style=color:#c30>&#39; &#39;</span>)[<span style=color:#f60>1</span>:]))
kia[<span style=color:#c30>&#39;yod&#39;</span>] <span style=color:#555>=</span> kia[<span style=color:#c30>&#39;yod&#39;</span>]<span style=color:#555>.</span>astype(<span style=color:#366>str</span>)

kia[<span style=color:#c30>&#39;dayDeath&#39;</span>] <span style=color:#555>=</span> kia[<span style=color:#c30>&#39;dod&#39;</span>]<span style=color:#555>.</span>apply(<span style=color:#069;font-weight:700>lambda</span> x: <span style=color:#366>int</span>(<span style=color:#366>str</span>(x)[<span style=color:#f60>6</span>:]))
kia[<span style=color:#c30>&#39;monthDeath&#39;</span>] <span style=color:#555>=</span> kia[<span style=color:#c30>&#39;dod&#39;</span>]<span style=color:#555>.</span>apply(<span style=color:#069;font-weight:700>lambda</span> x: <span style=color:#366>int</span>(<span style=color:#366>str</span>(x)[<span style=color:#f60>4</span>:<span style=color:#f60>6</span>]))

kia[<span style=color:#c30>&#39;tweet&#39;</span>] <span style=color:#555>=</span> kia[<span style=color:#c30>&#39;rank&#39;</span>] <span style=color:#555>+</span> <span style=color:#c30>&#34; &#34;</span> <span style=color:#555>+</span> kia[<span style=color:#c30>&#39;name&#39;</span>] <span style=color:#555>+</span> <span style=color:#c30>&#34;, &#34;</span> <span style=color:#555>+</span> <span style=color:#c30>&#34;KILLED IN ACTION, &#34;</span> <span style=color:#555>+</span> kia[<span style=color:#c30>&#39;countryOfDeath&#39;</span>] <span style=color:#555>+</span> <span style=color:#c30>&#34;. &#34;</span> <span style=color:#555>+</span> <span style=color:#c30>&#34;(&#34;</span> <span style=color:#555>+</span> kia[<span style=color:#c30>&#39;yod&#39;</span>] <span style=color:#555>+</span> <span style=color:#c30>&#34;)&#34;</span>

toTweet <span style=color:#555>=</span> kia[[<span style=color:#c30>&#39;tweet&#39;</span>, <span style=color:#c30>&#39;dayDeath&#39;</span>, <span style=color:#c30>&#39;monthDeath&#39;</span>]]
toTweet<span style=color:#555>.</span>to_csv(<span style=color:#c30>&#39;kia.tweets.dat&#39;</span>, sep<span style=color:#555>=</span><span style=color:#c30>&#39;|&#39;</span>, index<span style=color:#555>=</span>False, headers<span style=color:#555>=</span>None)
</code></pre></div><h1 id=prototype-the-bot>Prototype the bot</h1><p>Before going through all the Twitter account setup and API access things, it&rsquo;s easier to just prototype things by printing the tweets STDOUT. The main idea is to load in the file, get the current day and month, take all the deaths on the current day and month and then calculate the delay between them so that all can be tweeted before the end of the day. I also put in a buffer of two minutes, so that the script would finish no later than 2358. I do not account for things like rate limiting, restarting the service should it fail, exception handling, and so on. Out of scope for this project.</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>sys</span>
<span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>time</span>
<span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>math</span>
<span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>pandas</span> <span style=color:#069;font-weight:700>as</span> <span style=color:#0cf;font-weight:700>pd</span>
<span style=color:#069;font-weight:700>from</span> <span style=color:#0cf;font-weight:700>datetime</span> <span style=color:#069;font-weight:700>import</span> datetime

<span style=color:#069;font-weight:700>def</span> <span style=color:#c0f>main</span>():
	kia <span style=color:#555>=</span> pd<span style=color:#555>.</span>read_csv(sys<span style=color:#555>.</span>argv[<span style=color:#f60>1</span>], sep<span style=color:#555>=</span><span style=color:#c30>&#39;|&#39;</span>)
	now <span style=color:#555>=</span> datetime<span style=color:#555>.</span>now()
	year <span style=color:#555>=</span> now<span style=color:#555>.</span>year
	day <span style=color:#555>=</span> now<span style=color:#555>.</span>day
	month <span style=color:#555>=</span> now<span style=color:#555>.</span>month
	buffer_seconds <span style=color:#555>=</span> <span style=color:#f60>120</span>
	remaining_secs <span style=color:#555>=</span> (datetime(year, month, day<span style=color:#555>+</span><span style=color:#f60>1</span>) <span style=color:#555>-</span> datetime<span style=color:#555>.</span>now())<span style=color:#555>.</span>total_seconds() <span style=color:#555>-</span> buffer_seconds

	tweets <span style=color:#555>=</span> kia[(kia[<span style=color:#c30>&#39;dayDeath&#39;</span>] <span style=color:#555>==</span> day) <span style=color:#555>&amp;</span> (kia[<span style=color:#c30>&#39;monthDeath&#39;</span>] <span style=color:#555>==</span> month)][<span style=color:#c30>&#39;tweet&#39;</span>]<span style=color:#555>.</span>values
	delay <span style=color:#555>=</span> math<span style=color:#555>.</span>floor(remaining_secs <span style=color:#555>/</span> <span style=color:#366>len</span>(tweets))

	<span style=color:#069;font-weight:700>for</span> tweet <span style=color:#000;font-weight:700>in</span> tweets:
		<span style=color:#069;font-weight:700>print</span>(tweet)
		time<span style=color:#555>.</span>sleep(delay)

<span style=color:#069;font-weight:700>if</span> __name__ <span style=color:#555>==</span> <span style=color:#c30>&#39;__main__&#39;</span>:
	main()
</code></pre></div><h1 id=get-twitter-api-credentials>Get Twitter API credentials</h1><p>Now it&rsquo;s time to set up a new Twitter account and get API access. The hardest part is finding an available handle on Twitter. Really. It will probably take you longer to settle on an available name than it will to get your API keys.</p><p>Note that you <strong>must</strong> provide a phone number in order for Twitter to generate all the tokens you need.</p><ol><li><p>Set up a new Twitter account, make sure to include a phone number</p></li><li><p>Go to <a href=https://dev.twitter.com>https://dev.twitter.com</a> and set up a new application</p></li><li><p>After the application is set up, copy the Consumer Key and Consumer Secret strings</p></li><li><p>Click the button to generate an <a href=https://dev.twitter.com/oauth/overview/application-owner-access-tokens>access token</a></p></li><li><p>Copy the Token and Token Secret strings</p></li></ol><h1 id=get-the-bot-tweeting>Get the bot tweeting</h1><p>The first step is to <code>pip install twython</code>, a Python library for Twitter which allows tweeting (amongst other things) from any Python script. It&rsquo;s straightforward to use and flexible as well, as you can see from the <a href=https://twython.readthedocs.io/en/latest/usage/basic_usage.html>Basic Usage</a> page.</p><p>Then, simply add in the necessary credentials, set up the Twitter connection object, and post an actual tweet instead of the print we had before.</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>sys</span>
<span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>time</span>
<span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>math</span>
<span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>pandas</span> <span style=color:#069;font-weight:700>as</span> <span style=color:#0cf;font-weight:700>pd</span>
<span style=color:#069;font-weight:700>from</span> <span style=color:#0cf;font-weight:700>twython</span> <span style=color:#069;font-weight:700>import</span> Twython
<span style=color:#069;font-weight:700>from</span> <span style=color:#0cf;font-weight:700>datetime</span> <span style=color:#069;font-weight:700>import</span> datetime

consumer_key <span style=color:#555>=</span> <span style=color:#c30>&#39;YOUR CONSUMER KEY HERE&#39;</span>
consumer_secret <span style=color:#555>=</span> <span style=color:#c30>&#39;YOUR CONSUMER SECRET HERE&#39;</span>
token <span style=color:#555>=</span> <span style=color:#c30>&#39;YOUR TOKEN HERE&#39;</span>
token_secret <span style=color:#555>=</span> <span style=color:#c30>&#39;YOUR TOKEN SECRET HERE&#39;</span>

twitter <span style=color:#555>=</span> Twython(consumer_key, consumer_secret, token, token_secret)

<span style=color:#069;font-weight:700>def</span> <span style=color:#c0f>main</span>():
	kia <span style=color:#555>=</span> pd<span style=color:#555>.</span>read_csv(sys<span style=color:#555>.</span>argv[<span style=color:#f60>1</span>], sep<span style=color:#555>=</span><span style=color:#c30>&#39;|&#39;</span>)
	now <span style=color:#555>=</span> datetime<span style=color:#555>.</span>now()
	year <span style=color:#555>=</span> now<span style=color:#555>.</span>year
	day <span style=color:#555>=</span> now<span style=color:#555>.</span>day
	month <span style=color:#555>=</span> now<span style=color:#555>.</span>month
	buffer_seconds <span style=color:#555>=</span> <span style=color:#f60>120</span>
	remaining_secs <span style=color:#555>=</span> (datetime(year, month, day<span style=color:#555>+</span><span style=color:#f60>1</span>) <span style=color:#555>-</span> datetime<span style=color:#555>.</span>now())<span style=color:#555>.</span>total_seconds() <span style=color:#555>-</span> buffer_seconds

	tweets <span style=color:#555>=</span> kia[(kia[<span style=color:#c30>&#39;dayDeath&#39;</span>] <span style=color:#555>==</span> day) <span style=color:#555>&amp;</span> (kia[<span style=color:#c30>&#39;monthDeath&#39;</span>] <span style=color:#555>==</span> month)][<span style=color:#c30>&#39;tweet&#39;</span>]<span style=color:#555>.</span>values		
	delay <span style=color:#555>=</span> math<span style=color:#555>.</span>floor(remaining_secs <span style=color:#555>/</span> <span style=color:#366>len</span>(tweets))

	<span style=color:#069;font-weight:700>for</span> tweet <span style=color:#000;font-weight:700>in</span> tweets:
		twitter<span style=color:#555>.</span>update_status(status<span style=color:#555>=</span>tweet)
		time<span style=color:#555>.</span>sleep(delay)

<span style=color:#069;font-weight:700>if</span> __name__ <span style=color:#555>==</span> <span style=color:#c30>&#39;__main__&#39;</span>:
	main()
</code></pre></div><p>This will have our bot tweeting all the required death records, and it should finish no later than 1158 on any given day.</p><h1 id=deploy-to-a-virtual-machine-somewhere>Deploy to a virtual machine somewhere</h1><p>Since I do my work on a laptop which isn&rsquo;t always running, I keep the bot going on a virtual machine with Amazon Web Services. I won&rsquo;t go into details here of getting an EC2 instance up and running on AWS, but once you have that you can just SFTP or SCP the bot and the data file up to the machine.</p><p>Additionally, since the bot uses Pandas, rather than bothering with pip and dependencies and so on, I did what I always do for Python and just installed <a href=https://www.continuum.io/downloads>Anaconda</a> from Continuum Analytics. If you aren&rsquo;t using Anaconda for your Python work, life is probably harder for you than it needs to be.</p><p>Also, if you are still using Python 2 instead of Python 3&mldr;</p><p><img src=/static/images/yourebad.jpg alt="Futurama meme &lsquo;You&rsquo;re bad and you should feel bad&rsquo;"></p><h1 id=add-scheduling>Add scheduling</h1><p>For something like this, the easiest way to schedule it is to just add a cron job to run the bot every day at midnight, and it will then finish before 2358 on the same day.</p><p>So <code>crontab -e</code> and we just add an entry like <code>00 00 * * * /path/to/your/python /path/to/your/script /path/to/your/input/file</code></p><p>Now the bot will start every day at midnight, and finish by 2358, only to be restarted for a new day a few minutes later.</p><h1 id=fin>Fin</h1><p>If you want to do some quick Data Science projects, I&rsquo;d say this is a pretty representative and straightforward example. Additionally, though I haven&rsquo;t gotten around to it yet, putting the code on GitHub is usually a good idea. If you decide to do that, <strong>DO NOT FORGET</strong> to remove your API credentials before you commit and push the code.</p><p>So that&rsquo;s it. Gathering data and building Twitter bots isn&rsquo;t any kind of magic, although bots which interact with others are a different matter.</p><p>Now when I pull up my Twitter feed I get a nice reminder of those who gave their lives in service of the interests of the United States.</p><p>Remember.</p></div></div></section><div class="nav-box row"><div class=nav-left-menu><ul><li><a href=/>Latest</a> |</li><li><a href=/about.html>About</a> |</li><li><a href=/cases.html>Case Studies</a> |</li><li><a href=/contact.html>Contact</a> |</li><li><a href=/press.html>Press</a></li></ul></div></div><div class="footer-box row"><div class="footer-left col-md-6 col-xs-12"><div class="footer-bio content"><p><strong>Adam Drake</strong> leads technical business transformations in global and multi-cultural environments. He has a passion for helping companies become more productive by improving internal leadership capabilities, and accelerating product development through technology and data architecture guidance. Adam is currently a White House Presidential Innovation Fellow and IEEE Senior Member.</p></div></div><div class=footer-right><div class=social-icons><a href=https://github.com/adamdrake><img class=icon src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAC5UlEQVR4nO2a0XXiMBBFKYESKIEOlg5CB3EHmw5wB9DBbgebDnAHTgemA9PB3Q8J1mtkaSSPjTnRPYePHIzem/FoJFtZrTKZTCaTyWQmBFgD78ABOAMNjzT2u4O9dv1s36OwQf8EakewUmo7xuskA9gAR6AdEXif1o65eXZ8XjDlqxm4KxGHZ8f5ALBlXKnHUrOUagAKpr3rQ7TAfgnBP5viOwd/Y94ksKzgb8wzHTAN7xlzPkTLHI0Rf7ffdZJUAleFwK52rK0de+e5tp46+NJn1HH92vGbK1DZz6f93P7uJ6zEsQsMJKycKvgN/tKvAr/dIyhRybU2WUNMMxWAUyDzlbrosBdfAvSrAFPKocZXqYr6/YQS0KL5AAV8BAQBWjXBsB/JKlRoCkr2+Q9NcCqQrS46KwKm/CXsVARlnnxLYZfx0wDZru9TIa5YX6E+ABq7Q8LdH2a8+x1fe4GvUkMolOnZ5r7DW6gXVBoizeQi6d5CN6fREAlRjQ8l2VuwD2iI5AR89wRcJhdJ9xbioiEiWW83o4XifW0EvioNIUkCitFC8b4kG7RKQ0iyETqPDyna11ng66QhJNlxwTKfBVS2wtKHoZoZDjGtH+kplI4f4GsJSYgM/ktTOOYcoMa+wdUEU/ZNhI9CU3zN44NHZRPze8DAH+BNQfvNjhWD/gMaj6vB/YQWcw7g2zCdMUfnwcrA3Okjsi4/xPju7zDmqoKWfwcWW8f3XS4I+oPVCe4+PVwlOqlJcL0cvb+Bxd8rPkbqSBHrJIF7Z1gKzIsbI/J1vk81Rcx9c65S/+89PKaM9zYZOxJKMiH4a0ySRzFwh34pa8QyT/Adg675flQcP4ZCSzfWpCsJDWbJ+9H5vCeMvezgO0Z3CE5qEsYNMd+cD4FpjN73Bglj+qgWE3wXTNd3VkPCWEN3fdp1fiyYJfDUT0TCOP3AT7zS/wyvVvcmWZGwN7cB3x64XivwTCaTyWQymVfgL42yxWFGEKJcAAAAAElFTkSuQmCC width=64 height=64></a>
<a href=https://twitter.com/aadrake><img class=icon src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACQ0lEQVR4nO2a0XWjMBBFXQIluIR0EDpIOjAdLB1kO0g6sDvIdgAd2B3gDkwHNx8jEkIMNmTGkvfMPUc//hjmPTTSIHm1chzHcRzHcRzHSQggAx6BlzA2wEPsvMwBcqBinCYYkl2I8WyRXKEe9Ct2BmwnhJ8z4mEQ46ln3lo7wTwELlQDrz7F72eI7zgBr8D74Pc37RxXwK73gEI59naB+DEOTJTHb5IcvqFCKW7+U8PvxIex0cqxS/QcW4W4jZL4rhyqvhka2rtEx9izcHsC1krih7RLc5pK9jDxwBMXtqaRmKWB+KO6+JDsvyse3gCbGTH/Kou3WQBDssWMRBrgz6VkDAywER+SzZDamkuFmPFjWqJsgJn4XsIaNVsh+/4L0y3vbMwNCCZcsxZEwVr4K7JtZXzvClOhtTagY49M3VMcnaPU1gZM9QEpsLM24C22wgsU1gZYta1a2J8Wke4sOJqLDwZkpLkW6B+A3JkJtz0sRUxIpRwONxU/MGKNNEXHiAYUMYQ/I81QN2I1Rcebiw8GrFn2ZaiN/tn/DBO0v+XnUkcT3zOhjiS+RfviY6EBGXE+j4vY2r+BHJTcak3YxdZ7FmQ2lMiMsDIj3p4/B+S2p9EWj+WhpwbILBheVGpQJy0e6Qu2BsIh4Zp/RM4Jl1xrX0NLzEanJzRH+v0K/boeI70pj3R+1ltdDeSxtU6CXJFpdoAtMsPu6w9QyMJXsuxz+ICcJ8SvcS2QLTAPo0RKphtl+P2+3rLjOI7jOI7jOP8tH5ahgbeYuZE9AAAAAElFTkSuQmCC width=64 height=64></a>
<a href=https://linkedin.com/in/aadrake><img class=icon src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAzElEQVRIie2WWxGDMBBFVwISkIAEnBQJOCoOKqE4AAeNg+Lg9AOY2VmSTls29If7eTPJmbubl8gioAEG/DQAF9ECOkeA1VUnya1GgPEA0CARs2dO2QLBi2RBAShU78pcoF6MgCkH6AlUClJ7QGKgFXYD7l6QFOhbBeYN9Hb3bkCRHqX8CaiNV6aAe0CV9Ra/IHIsfgapRYuIv7lt9iTSi7VmbHP+9oB0eR6peR6gj+adoBP0X9ART/l43OdkiZnzu9XZmjb4lnFkTSIiLyov4WUSpGLDAAAAAElFTkSuQmCC width=64 height=64></a>
<a href=/index.xml><img class=icon src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAABOElEQVRIib2WXXWEMBBGIyESkICDroPWQSNhHRQnrANwsOsAHFAJdXD7ALSz0wmZLrTfObwwkDs/X3ISwiIgAQPHaQBegxRwORCg1cpK/lopAKN6eQEaoAduwPsBoCFoSDAEVMDZSMotF0hBT8yV7gIBtMAb8Aw8ATEDTMDHHpClDm3VGVbjbKcXtGrSQCB6YL8FreoQLfXALJC099bPg4LVbMys6DpmazdOWHbzu+29AK0KO/Wdaf2SvaNaJGKfi0ntMxfIApcGP6mEflTudd0E1KqNWrKq86OgFSYr0wbplQMfBoEwC3ZVMpG7U98C3ZZFKmwHZRcDTjn3WaCqkPWLiPfemAWKBVCzMadszAJd+W7d1YjLOek9lY2ZnneoXR5vbPy/y0mmBUfqq50rLLHj8mFoRJwWnzknvtUm1yWnAAAAAElFTkSuQmCC width=64 height=64></a></div><div class=subscribe><form action=https://api.digitalmaneuver.com/subscribe method=get><input class=subscribe-field style=width:200px name=email placeholder="Subscribe to newsletter?" type=text>
<input class=subscribe-btn value=Yes! type=submit></form></div></div></div><div class="container has-text-centered footer-copyright"></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-118644773-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body>